{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Faction Schema",
  "description": "Faction structure: ideology, members, ranks, reputation system",
  "type": "object",
  "properties": {
    "schema_version": {"type": "string", "description": "Schema version", "pattern": "^(0|[1-9]\\\\d*)\\\\.(0|[1-9]\\\\d*)\\\\.(0|[1-9]\\\\d*)(?:-((?:0|[1-9]\\\\d*|\\\\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\\\\.(?:0|[1-9]\\\\d*|\\\\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\\\\+([0-9a-zA-Z-]+(?:\\\\.[0-9a-zA-Z-]+)*))?$", "default": "2.2.0"},
    "faction_id": {"type": "string", "description": "Unique ID (lowercase, underscores)"},
    "name": {"type": "string", "description": "Display name"},
    "description": {"type": "string", "description": "History, goals, public image"},
    "ideology": {"type": "string", "description": "Core beliefs, alignment, motivations"},
    "allies": {"type": "array", "description": "Allied faction_ids", "items": {"type": "string"}},
    "enemies": {"type": "array", "description": "Hostile faction_ids", "items": {"type": "string"}},
    "membership": {
      "type": "object",
      "properties": {
        "recruitment_policy": {"type": "string", "enum": ["Open", "Invite Only", "Restricted"], "description": "Join method"},
        "members": {"type": "array", "description": "Member character/NPC IDs", "items": {"type": "string"}}
      },
      "required": ["recruitment_policy"]
    },
    "ranks": {
      "type": "array",
      "description": "Hierarchical ranks",
      "items": {
        "type": "object",
        "properties": {
          "title": {"type": "string", "description": "Rank name (e.g., Initiate, Captain)"},
          "min_reputation": {"type": "integer", "description": "Min rep score required"},
          "privileges": {"type": "string", "description": "Benefits and responsibilities"}
        },
        "required": ["title", "min_reputation"]
      }
    },
    "reputation_tiers": {
      "type": "object",
      "description": "Rep tier ranges",
      "properties": {
        "hated": {"type": "object", "properties": {"min": {"type": "integer"}, "max": {"type": "integer"}}, "required": ["min", "max"]},
        "disliked": {"type": "object", "properties": {"min": {"type": "integer"}, "max": {"type": "integer"}}, "required": ["min", "max"]},
        "neutral": {"type": "object", "properties": {"min": {"type": "integer"}, "max": {"type": "integer"}}, "required": ["min", "max"]},
        "liked": {"type": "object", "properties": {"min": {"type": "integer"}, "max": {"type": "integer"}}, "required": ["min", "max"]},
        "honored": {"type": "object", "properties": {"min": {"type": "integer"}, "max": {"type": "integer"}}, "required": ["min", "max"]}
      },
      "additionalProperties": false,
      "required": ["hated", "disliked", "neutral", "liked", "honored"]
    }
  },
  "required": ["schema_version", "faction_id", "name", "description", "ideology", "membership", "ranks", "reputation_tiers"]
}
